<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Tracker` struct in crate `timely`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Tracker">

    <title>timely::progress::nested::reachability::Tracker - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct Tracker</p><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.update_target">update_target</a><a href="#method.update_source">update_source</a><a href="#method.clear">clear</a><a href="#method.is_empty">is_empty</a><a href="#method.allocate_from">allocate_from</a><a href="#method.propagate_node">propagate_node</a><a href="#method.propagate_all">propagate_all</a><a href="#method.pushed_mut">pushed_mut</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Default">Default</a><a href="#impl-Debug">Debug</a></div></div><p class='location'><a href='../../../index.html'>timely</a>::<wbr><a href='../../index.html'>progress</a>::<wbr><a href='../index.html'>nested</a>::<wbr><a href='index.html'>reachability</a></p><script>window.sidebarCurrent = {name: 'Tracker', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../../../index.html'>timely</a>::<wbr><a href='../../index.html'>progress</a>::<wbr><a href='../index.html'>nested</a>::<wbr><a href='index.html'>reachability</a>::<wbr><a class="struct" href=''>Tracker</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#333-348' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Tracker&lt;T:&nbsp;<a class="trait" href="../../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>&gt; { /* fields omitted */ }</pre><div class='docblock'><p>An interactive tracker of propagated reachability information.</p>

<p>A <code>Tracker</code> tracks, for a fixed graph topology, the consequences of
pointstamp changes at various node input and output ports. These changes may
alter the potential pointstamps that could arrive at downstream input ports.</p>

<p>A <code>Tracker</code> instance is constructed from a reachability summary, by
way of its <code>allocate_from</code> method. With a fixed topology, users can interactively
call <code>update_target</code> and <code>update_source</code> to change observed pointstamp counts
at node inputs and outputs, respectively. These changes are buffered until a
user invokes either <code>propagate_all</code> or <code>propagate_node</code>, which consume buffered 
changes propagate their consequences along the graph to any other port that 
can be reached. These changes can be read for each node using <code>pushed_mut</code>.</p>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1>
<pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">progress</span>::<span class="ident">frontier</span>::<span class="ident">Antichain</span>;
<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">progress</span>::<span class="ident">nested</span>::<span class="ident">subgraph</span>::{<span class="ident">Source</span>, <span class="ident">Target</span>};
<span class="kw">use</span> <span class="ident">timely</span>::<span class="ident">progress</span>::<span class="ident">nested</span>::<span class="ident">reachability</span>::{<span class="ident">Builder</span>, <span class="ident">Tracker</span>};

<span class="comment">// allocate a new empty topology builder.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">builder</span> <span class="op">=</span> <span class="ident">Builder</span>::<span class="op">&lt;</span><span class="ident">usize</span><span class="op">&gt;</span>::<span class="ident">new</span>();
 
<span class="comment">// Each node with one input connected to one output.</span>
<span class="ident">builder</span>.<span class="ident">add_node</span>(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="macro">vec</span><span class="macro">!</span>[<span class="ident">Antichain</span>::<span class="ident">from_elem</span>(<span class="number">0</span>)]]);
<span class="ident">builder</span>.<span class="ident">add_node</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="macro">vec</span><span class="macro">!</span>[<span class="ident">Antichain</span>::<span class="ident">from_elem</span>(<span class="number">0</span>)]]);
<span class="ident">builder</span>.<span class="ident">add_node</span>(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="macro">vec</span><span class="macro">!</span>[<span class="macro">vec</span><span class="macro">!</span>[<span class="ident">Antichain</span>::<span class="ident">from_elem</span>(<span class="number">1</span>)]]);

<span class="comment">// Connect nodes in sequence, looping around to the first from the last.</span>
<span class="ident">builder</span>.<span class="ident">add_edge</span>(<span class="ident">Source</span> { <span class="ident">index</span>: <span class="number">0</span>, <span class="ident">port</span>: <span class="number">0</span>}, <span class="ident">Target</span> { <span class="ident">index</span>: <span class="number">1</span>, <span class="ident">port</span>: <span class="number">0</span>} );
<span class="ident">builder</span>.<span class="ident">add_edge</span>(<span class="ident">Source</span> { <span class="ident">index</span>: <span class="number">1</span>, <span class="ident">port</span>: <span class="number">0</span>}, <span class="ident">Target</span> { <span class="ident">index</span>: <span class="number">2</span>, <span class="ident">port</span>: <span class="number">0</span>} );
<span class="ident">builder</span>.<span class="ident">add_edge</span>(<span class="ident">Source</span> { <span class="ident">index</span>: <span class="number">2</span>, <span class="ident">port</span>: <span class="number">0</span>}, <span class="ident">Target</span> { <span class="ident">index</span>: <span class="number">0</span>, <span class="ident">port</span>: <span class="number">0</span>} );

<span class="comment">// Construct a reachability tracker.</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">tracker</span> <span class="op">=</span> <span class="ident">Tracker</span>::<span class="ident">allocate_from</span>(<span class="ident">builder</span>.<span class="ident">summarize</span>());

<span class="comment">// Introduce a pointstamp at the output of the first node.</span>
<span class="ident">tracker</span>.<span class="ident">update_source</span>(<span class="ident">Source</span> { <span class="ident">index</span>: <span class="number">0</span>, <span class="ident">port</span>: <span class="number">0</span>}, <span class="number">17</span>, <span class="number">1</span>);

<span class="comment">// Propagate changes; until this call updates are simply buffered.</span>
<span class="ident">tracker</span>.<span class="ident">propagate_all</span>();

<span class="comment">// Propagated changes should have a single element, incremented for node zero.</span>
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">tracker</span>.<span class="ident">pushed_mut</span>(<span class="number">0</span>)[<span class="number">0</span>].<span class="ident">drain</span>().<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;&gt;</span>(), <span class="macro">vec</span><span class="macro">!</span>[(<span class="number">18</span>, <span class="number">1</span>)]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">tracker</span>.<span class="ident">pushed_mut</span>(<span class="number">1</span>)[<span class="number">0</span>].<span class="ident">drain</span>().<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;&gt;</span>(), <span class="macro">vec</span><span class="macro">!</span>[(<span class="number">17</span>, <span class="number">1</span>)]);
<span class="macro">assert_eq</span><span class="macro">!</span>(<span class="ident">tracker</span>.<span class="ident">pushed_mut</span>(<span class="number">2</span>)[<span class="number">0</span>].<span class="ident">drain</span>().<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span>_<span class="op">&gt;&gt;</span>(), <span class="macro">vec</span><span class="macro">!</span>[(<span class="number">17</span>, <span class="number">1</span>)]);</pre>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class="trait" href="../../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>&gt; <a class="struct" href="../../../../timely/progress/nested/reachability/struct.Tracker.html" title="struct timely::progress::nested::reachability::Tracker">Tracker</a>&lt;T&gt;</code><a href='#impl' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#350-464' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.update_target' class="method"><span id='update_target.v' class='invisible'><code>pub fn <a href='#method.update_target' class='fnname'>update_target</a>(&amp;mut self, target: <a class="struct" href="../../../../timely/progress/nested/subgraph/struct.Target.html" title="struct timely::progress::nested::subgraph::Target">Target</a>, time: T, value: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#354-356' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Updates the count for a time at a target.</p>
</div><h4 id='method.update_source' class="method"><span id='update_source.v' class='invisible'><code>pub fn <a href='#method.update_source' class='fnname'>update_source</a>(&amp;mut self, source: <a class="struct" href="../../../../timely/progress/nested/subgraph/struct.Source.html" title="struct timely::progress::nested::subgraph::Source">Source</a>, time: T, value: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i64.html">i64</a>)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#359-361' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Updates the count for a time at a source.</p>
</div><h4 id='method.clear' class="method"><span id='clear.v' class='invisible'><code>pub fn <a href='#method.clear' class='fnname'>clear</a>(&amp;mut self)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#364-368' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Clears the pointstamp counter.</p>
</div><h4 id='method.is_empty' class="method"><span id='is_empty.v' class='invisible'><code>pub fn <a href='#method.is_empty' class='fnname'>is_empty</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#371-373' title='goto source code'>[src]</a></span></h4>
<div class='docblock'></div><h4 id='method.allocate_from' class="method"><span id='allocate_from.v' class='invisible'><code>pub fn <a href='#method.allocate_from' class='fnname'>allocate_from</a>(summary: <a class="struct" href="../../../../timely/progress/nested/reachability/struct.Summary.html" title="struct timely::progress::nested::reachability::Summary">Summary</a>&lt;T&gt;) -&gt; Self</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#376-407' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Allocate a new <code>Tracker</code> using the shape from <code>summaries</code>.</p>
</div><h4 id='method.propagate_node' class="method"><span id='propagate_node.v' class='invisible'><code>pub fn <a href='#method.propagate_node' class='fnname'>propagate_node</a>(&amp;mut self, index: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#413-446' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Propagates updates from an indicated node.</p>

<p>This method is potentially useful for propagating the consequences of a single
node invocation, to make the results available immediately.</p>
</div><h4 id='method.propagate_all' class="method"><span id='propagate_all.v' class='invisible'><code>pub fn <a href='#method.propagate_all' class='fnname'>propagate_all</a>(&amp;mut self)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#449-453' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Propagates all updates made to sources and targets.</p>
</div><h4 id='method.pushed_mut' class="method"><span id='pushed_mut.v' class='invisible'><code>pub fn <a href='#method.pushed_mut' class='fnname'>pushed_mut</a>(&amp;mut self, node: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;mut [</a><a class="struct" href="../../../../timely/progress/change_batch/struct.ChangeBatch.html" title="struct timely::progress::change_batch::ChangeBatch">ChangeBatch</a>&lt;T&gt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#461-463' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Provides access to pushed changes for a node.</p>

<p>The caller may read the results or consume the results, as appropriate. The method
itself does not clear the buffer, so pushed values will stay in place until they are
consumed by some caller.</p>
</div></div>
            <h2 id='implementations' class='small-section-header'>
              Trait Implementations<a href='#implementations' class='anchor'></a>
            </h2>
        <h3 id='impl-Default' class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> + <a class="trait" href="../../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="../../../../timely/progress/nested/reachability/struct.Tracker.html" title="struct timely::progress::nested::reachability::Tracker">Tracker</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="type" href="../../../../timely/progress/timestamp/trait.Timestamp.html#associatedtype.Summary" title="type timely::progress::timestamp::Timestamp::Summary">Summary</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="type" href="../../../../timely/progress/timestamp/trait.Timestamp.html#associatedtype.Summary" title="type timely::progress::timestamp::Timestamp::Summary">Summary</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a>,&nbsp;</span></code><a href='#impl-Default' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#332' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.default' class="method"><span id='default.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default' class='fnname'>default</a>() -&gt; <a class="struct" href="../../../../timely/progress/nested/reachability/struct.Tracker.html" title="struct timely::progress::nested::reachability::Tracker">Tracker</a>&lt;T&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#332' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Returns the &quot;default value&quot; for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></div><h3 id='impl-Debug' class='impl'><span class='in-band'><code>impl&lt;T:&nbsp;<a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="../../../../timely/progress/timestamp/trait.Timestamp.html" title="trait timely::progress::timestamp::Timestamp">Timestamp</a>&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="../../../../timely/progress/nested/reachability/struct.Tracker.html" title="struct timely::progress::nested::reachability::Tracker">Tracker</a>&lt;T&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="type" href="../../../../timely/progress/timestamp/trait.Timestamp.html#associatedtype.Summary" title="type timely::progress::timestamp::Timestamp::Summary">Summary</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;T::<a class="type" href="../../../../timely/progress/timestamp/trait.Timestamp.html#associatedtype.Summary" title="type timely::progress::timestamp::Timestamp::Summary">Summary</a>: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a>,&nbsp;</span></code><a href='#impl-Debug' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#332' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.fmt' class="method"><span id='fmt.v' class='invisible'><code>fn <a href='https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt' class='fnname'>fmt</a>(&amp;self, __arg_0: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../../src/timely/progress/nested/reachability.rs.html#332' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../../";
        window.currentCrate = "timely";
    </script>
    <script src="../../../../main.js"></script>
    <script defer src="../../../../search-index.js"></script>
</body>
</html>